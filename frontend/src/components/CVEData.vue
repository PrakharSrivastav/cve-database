<template>
  <v-container fluid="">
    <v-text-field v-model="search" label="Search" prepend-inner-icon="mdi-magnify" single-line variant="outlined"
      hide-details>
    </v-text-field>



    <v-data-table density="comfortable" :items="tableData" :search="search" :headers="headers" :group-by="groupBy"
      :items-per-page-options="[20, 50, 100, 200, -1]" :items-per-page="50">
      <template v-slot:item.ID="{ item }">
        <v-chip size="small" color="green">
          {{ item.ID }} : {{ item.RunID }}
        </v-chip>
      </template>
    </v-data-table>
  </v-container>
</template>

<script>
export default {
  name: 'CVEData',
  data() {
    return {
      search: '',
      tableData: [],
      /* groupBy: [
         { key: 'CVE', order: 'asc', },
         //{ key: 'Host', order: 'asc', },
         //{ key: 'Image', order: 'asc', },
       ],*/
      headers: [
        { key: 'CVE', title: 'CVE' },
        { key: 'RiskScore', title: 'RiskScore' },
        { key: 'ID', title: 'ID', },
        { key: 'NameSpace', title: 'NameSpace' },
        { key: 'Packages', title: 'Packages' },
        { key: 'ImpactedPackages', title: 'ImpactedPackages' },
      ],
      footerOptions: {
        itemsPerPageOptions: [50, 100, -1],
      }
    }
  },
  methods: {
    getList() {
      const api = "http://localhost:1323/cve"
      this.axios
        .get(api, {
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then((response) => {
          this.tableData = response.data
        });

    },
  },
  created() {
    this.getList()
  }

}
</script>
